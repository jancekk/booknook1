<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/to-read/tabs/fiction"></ion-back-button>
    </ion-buttons>
    <ion-title>Details</ion-title>
  </ion-toolbar>
</ion-header>

<div class="ion-text-center" *ngIf="isLoading">
  <ion-spinner color="primary"></ion-spinner>
</div>

<ion-content *ngIf="!isLoading">
  <ion-card *ngIf="book">
    <ion-grid>
      <ion-row>
        <ion-col size="12" size-md="6">
          <img [src]="book.imageUrl">
        </ion-col>
        <ion-col size="12" size-md="6" class="ion-text-right">
          <ion-card-header>
            <ion-card-title>{{ book.text }}</ion-card-title>
            <ion-card-subtitle>{{ book.author }}</ion-card-subtitle>
          </ion-card-header>
          <ion-card-content class="ion-text-left">
            <p>{{ book.description }}</p>
            
            <ion-item *ngIf="book.review !== undefined && book.review !== null && book.review.trim() !== ''">
              <ion-label>
                <h2>Review:</h2>
                <p>{{ book.review }}</p>
              </ion-label>
            </ion-item>

            <ion-item *ngIf="book.stars !== undefined && book.stars !== null && book.stars.trim() !== ''">
              <ion-label>
                <h2>Stars:</h2>
                <p>{{ book.stars }}</p>
              </ion-label>
            </ion-item>
          </ion-card-content>

          <ion-footer *ngIf="!(book.review && book.review.trim() !== '') && !(book.stars && book.stars.trim() !== '')">
            <ion-button fill="solid" color="secondary" (click)="log()">Log</ion-button>
            <ion-button fill="solid" color="danger" (click)="deleteBook()">Delete</ion-button>
            <ion-button fill="solid" color="primary" (click)="editBook()">Edit</ion-button>
          </ion-footer>

          <ion-footer *ngIf="(book.review && book.review.trim() !== '') || (book.stars && book.stars.trim() !== '')">
            <ion-button fill="solid" color="primary" (click)="editReview()">Edit Review</ion-button>
            <ion-button fill="solid" color="danger" (click)="deleteReview()">Delete Review</ion-button>
            <ion-button fill="solid" color="primary" (click)="editBook()">Edit Book</ion-button>
            <ion-button fill="solid" color="danger" (click)="deleteBook()">Delete Book</ion-button>
          </ion-footer>
          
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>
</ion-content>
